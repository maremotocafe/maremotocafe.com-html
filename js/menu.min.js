'use strict';class Menu{constructor(a,b){this.numItems=0,this.initialItems=a,this.incrementLoad=b,this.curFilter='all'}setup(a,b){this.container=document.querySelector('.shuffle-wrapper'),this.allInputs=Array.from(document.querySelectorAll('input[name="shuffle-filter"]')),this.toggableFilters=document.querySelectorAll('.menu-filter:not([filter-level="1"])'),this.noItemsMsg=document.getElementById('no-items-msg'),this.loadMoreBtn=document.getElementById('load-more-btn'),this.setupShuffle(),this.setupListeners(),this.setupItems(a,b)}setupShuffle(){this.shuffle=new window.Shuffle(this.container,{itemSelector:'.shuffle-item',buffer:1}),Array.from(document.getElementsByClassName('lozad')).forEach(a=>a.addEventListener('load',()=>this.shuffle.layout()))}setupListeners(){this.allInputs.forEach(a=>{a.addEventListener('click',a=>this.onInputClick(a))}),this.loadMoreBtn.addEventListener('click',a=>{this.onLoadMoreClicked(a)})}setupItems(a,b){this.items=Array.from(document.getElementById(a).children),this.items.forEach(a=>{this.shuffle.element.appendChild(a)}),this.shuffle.add(this.items),this.shuffle.filter(a=>!1)}getBar(a){return a.children[1]}barContains(a,b){return Array.from(a.children).some(a=>a.children[0].getAttribute('filter-value')===b)}resetFilter(b){function c(a){a.classList.remove('active'),a.classList.checked=!1}function d(a){a.classList.add('active'),a.classList.checked=!0}let a=this.getBar(b),e=Array.from(a.children).find(a=>a.classList.contains('active')),f=a.children[0];c(e),d(f)}hideFilter(b){const a=$(b);if(a.is(':hidden'))return;this.resetFilter(b),a.css('opacity',1),a.addClass('d-none'),a.animate({opacity:0},400)}showFilter(b){const a=$(b);if(!a.is(':hidden'))return;a.css('opacity',0),a.removeClass('d-none'),a.animate({opacity:1},400)}scrollTo(a){const b=$('html, body');b.animate({scrollTop:$(a).offset().top-90},500)}updateFilters(b,c,a){this.toggableFilters.forEach(d=>{const e=d.getAttribute('filter-parent');let f=this.getBar(d);const h=f===b,g=e===a,i=this.barContains(f,c);h||g||i?(this.showFilter(d),g&&this.scrollTo(d),e===a&&this.resetFilter(d)):this.hideFilter(d)})}updateItems(a){this.curFilter!==a&&(this.numItems=this.initialItems,this.curFilter=a);let b=0;this.shuffle.filter(c=>{const d=JSON.parse(c.getAttribute('data-groups'));if(a==='all'||d.some(b=>b===a))if(b++,b<=this.numItems)return!0;return!1}),this.shuffle.update(),b===0?this.noItemsMsg.classList.remove('d-none'):this.noItemsMsg.classList.add('d-none'),b<=this.numItems?this.loadMoreBtn.classList.add('d-none'):this.loadMoreBtn.classList.remove('d-none')}onInputClick(d){const a=d.currentTarget,b=a.getAttribute('filter-value'),c=a.parentNode.parentNode,e=c.parentNode.getAttribute('filter-parent');this.updateFilters(c,e,b),this.updateItems(b)}onLoadMoreClicked(a){this.numItems+=this.incrementLoad,this.updateItems(this.curFilter)}}window.Menu=Menu