'use strict';window.addEventListener('load',(e)=>{const minScroll=1000;const scrollBtn=document.getElementById('scroll-to-top');function toggleScrollToTop(){if(document.documentElement.scrollTop>minScroll||window.pageYOffset>minScroll||document.body.scrollTop>minScroll){scrollBtn.style.display="block";}else{scrollBtn.style.display="none";}}
window.onscroll=toggleScrollToTop;toggleScrollToTop();const observer=lozad();observer.observe();$('.image-popup').magnificPopup({fixedContentPos:false,fixedBgPos:true});const containerEl=document.querySelector('.shuffle-wrapper');var myShuffle=new window.Shuffle(containerEl,{itemSelector:'.shuffle-item',buffer:1,useTransforms:false});Array.from(document.getElementsByClassName('lozad')).forEach(img=>img.addEventListener('load',()=>myShuffle.layout()));if(containerEl){const allInputs=document.querySelectorAll('input[name="shuffle-filter"]');const toggableBars=document.querySelectorAll('.portfolio-filter:not([filter-level="1"])');const noItemsMsg=document.getElementById('no-items-msg');const loadMoreBtn=document.getElementById('load-more-btn');const INITIAL_NUM_ITEMS=parseInt(loadMoreBtn.getAttribute('load-max'));const INCREMENT_LOAD=parseInt(loadMoreBtn.getAttribute('load-increment'));let numItems=INITIAL_NUM_ITEMS;let prevFilter='all';function barContains(bar,value){return Array.from(bar.children).some(i=>i.children[0].getAttribute('filter-value')===value);}
function resetBar(bar){function deactivate(el){el.classList.remove('active');el.classList.checked=false;}
function activate(el){el.classList.add('active');el.classList.checked=true;}
deactivate(Array.from(bar.children).find(i=>i.classList.contains('active')));activate(bar.children[0]);}
function hideBar(bar){const barJQ=$(bar);if(barJQ.is(':hidden')){return}
resetBar(bar);barJQ.css('opacity',1);barJQ.removeClass('d-flex');barJQ.addClass('d-none');barJQ.animate({opacity:0},400);}
function showBar(bar){const barJQ=$(bar);if(!barJQ.is(':hidden')){return}
barJQ.css('opacity',0);barJQ.removeClass('d-none');barJQ.addClass('d-flex');barJQ.animate({opacity:1},400);}
function filterItems(filter){if(prevFilter!==filter){numItems=INITIAL_NUM_ITEMS;prevFilter=filter;}
let numMatches=0;myShuffle.filter(item=>{const dataGroups=JSON.parse(item.getAttribute('data-groups'));if(filter==='all'||dataGroups.some(field=>field===filter)){numMatches++;if(numMatches<=numItems){item.classList.remove('d-none');return true;}}
return false;});if(numMatches===0){noItemsMsg.style.display='flex';loadMoreBtn.style.display='none';}else if(numMatches<=numItems){noItemsMsg.style.display='none';loadMoreBtn.style.display='none';}else{noItemsMsg.style.display='none';loadMoreBtn.style.display='block';}}
Array.from(allInputs).forEach(item=>item.addEventListener('click',e=>{const curInput=e.currentTarget;const curFilter=curInput.getAttribute('filter-value');const curBar=curInput.parentNode.parentNode;toggableBars.forEach(iter=>{const iterParent=iter.getAttribute('filter-parent');if(iter===curBar||barContains(iter,curBar.getAttribute('filter-parent'))||iterParent===curFilter){showBar(iter);if(iterParent===curFilter){resetBar(iter);}}else{hideBar(iter);}});filterItems(curFilter);}));loadMoreBtn.addEventListener('click',e=>{numItems+=INCREMENT_LOAD;filterItems(prevFilter);});}
let htmlAndBody=$('html, body');$('nav a, .page-scroll').on('click',function(){if(location.pathname.replace(/^\//,'')===this.pathname.replace(/^\//,'')&&location.hostname===this.hostname){let target=$(this.hash);target=target.length?target:$('[name='+this.hash.slice(1)+']');if(target.length){htmlAndBody.animate({scrollTop:target.offset().top-50},750);return false;}}});document.getElementById('contact-submit').addEventListener('click',e=>{e.preventDefault();const errColor="#b10b1f";const okColor="rgba(236,239,241,.07)";const subject=document.getElementById('subject');const message=document.getElementById('message');const helpMsg=document.getElementById('contact-help');if(subject.value.length==0){subject.style.borderColor=errColor;return;}
subject.style.borderColor=okColor;if(message.value.length==0){message.style.borderColor=errColor;return;}
message.style.borderColor=okColor;let uri='mailto:maremotocafe@hotmail.com?subject='
+encodeURIComponent(subject.value)+'&body='
+encodeURIComponent(message.value);window.open(uri,'_blank');helpMsg.style.display='block'});});